%script{:charset => "utf-8", :type => "text/javascript"}
  function change_repo_items(repo_id)
  {
  $.ajax('<haml:loud> url_for(:action =&gt; &quot;repo_select&quot;) </haml:loud>?repo='+repo_id,
  {
  method: 'get',
  success: function(data) {
  $("#repo_info").html(data);
  }
  });
  }
  $(function () {
  $('form').on('submit', function (e) {
  history.replaceState({submitted: "yes"}, '', "");
  });
  if (history && history.state && history.state.submitted == "yes"){
  $('form').on('submit', function (e) {
  e.preventDefault();
  alert("You've already submitted this form. Redirecting to the Class Request Tool's homepage!");
  location.href = "/";
  });
  }
  });
%noscript Please enable Javascript.
%h3
  Request a Class Visit &mdash;
  \#{@course.repository.nil? ? "Not Sure - Help me Choose" : @course.repository.name}
#info-left
  = semantic_form_for(@course, :html => {:multipart => true}) do |f|
    = f.inputs do
      - unless @course.repository.nil?
        = f.hidden_field :repository_id, :value => @course.repository.id
      #requester_info= render :partial => 'shared/forms/course_requester_info', :locals=>{:f=>f}
      #course_info= render :partial => 'shared/forms/course_info', :locals=>{:f=>f}
      #involvement_info= render :partial => 'shared/forms/course_staff_involvement', :locals=>{:f=>f}
      #scheduling_info= render :partial => 'shared/forms/course_scheduling', :locals=>{:f=>f}
    = f.actions do
      = f.action :submit, :as => :button, :label => 'Submit Request ', :button_html =>{:class => "btn btn-primary"}
